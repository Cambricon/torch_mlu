cmake_minimum_required(VERSION 3.13 FATAL_ERROR)

set(FRAMEWORK_DEPENDENT_SRCS ${BASIC_SRCS})

file(GLOB_RECURSE FRAMEWORK_BASIC_SRCS
    ${CMAKE_CURRENT_SOURCE_DIR}/*.cpp
)

if(BUILD_LIBTORCH)
    file(GLOB_RECURSE EXCLUDED_SRCS
        ${CMAKE_CURRENT_SOURCE_DIR}/distributed/*.cpp
        ${CMAKE_CURRENT_SOURCE_DIR}/profiler/*.cpp
    )

    list(REMOVE_ITEM FRAMEWORK_BASIC_SRCS ${EXCLUDED_SRCS})
endif()

list(APPEND FRAMEWORK_DEPENDENT_SRCS ${FRAMEWORK_BASIC_SRCS})
set(BASIC_SRCS ${FRAMEWORK_DEPENDENT_SRCS} PARENT_SCOPE)
